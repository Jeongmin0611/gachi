<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.gachi.admin.ClassDaoImp">
	<select id="selectAllClass" parameterType="com.bitcamp.gachi.admin.TestVO" resultType="com.bitcamp.gachi.admin.ClassVO">
				select class_code,category,class_name,nickname,total_student,to_char(signup,'YYYY-MM-DD') signup,
				to_char(allrow,'YYYY-MM-DD') allrow,class_state from class c join member m on c.userid=m.userid 
							<choose>				
								<when test="category==null and option==null and class_state==null and searchWord==null "></when>							
								<when test='category.equals("전체") and !option.equals("전체") and class_state.equals("전체")'>
								 	<where>
								 		 #{option} like '%'||#{searchWord}||'%'
								 	</where>
								</when>	
							</choose>
					order by class_code
	</select>
</mapper>